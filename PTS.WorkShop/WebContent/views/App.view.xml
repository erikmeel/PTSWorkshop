<core:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"
	xmlns="sap.m"
	controllerName="views.App"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:c="sap.ui.core"
	xmlns:l="sap.ui.layout"
	xmlns:f="sap.ui.layout.form">
	<Page id="mainPage">
		<customHeader>
			<Bar>
				<contentLeft>
					<Image src="assets/images/logo_inverted.png" height="45px" />
				</contentLeft>
				<contentMiddle>
					<Label text="{i18n>MainHeaderPanelText}" class="sapUiResponsiveMargin appTitle"
						width="auto" />
				</contentMiddle>
				<contentRight>
					<FlexBox alignContent="Center"
					justifyContent="Center" wrap="Wrap"
						renderType="Bare" height="60px" width="100px">
						<Text class="flexDateTime" id="idDateTime" />
					</FlexBox>
				</contentRight>
			</Bar>
		</customHeader>
		<content>
			<IconTabBar>
				<items>
					<IconTabFilter id="idSearchForm" text="{i18n>EquipmentSearchIconBarText}">
						<l:Grid hSpacing="1" class="sapUiSmallMarginTop" defaultSpan="L6 M6 S10">
							<l:content>
								<StandardListItem title="{i18n>SerialNumber}">
									<layoutData>
										<l:GridData span="L2 M2 S2"/>
									</layoutData>
								</StandardListItem>
								<Input id="idSerialNr" value="{/equipment/serial_number}" valueLiveUpdate="true" width="150px"
										liveChange="serialChange">
									<layoutData>
										<l:GridData span="L3 M3 S3"></l:GridData>
									</layoutData>
								</Input>
								<StandardListItem title="{i18n>Equipment}">
									<layoutData>
										<l:GridData span="L2 M2 S2"/>
									</layoutData>
								</StandardListItem>
								<StandardListItem title="{/equipment/description}">
									<layoutData>
										<l:GridData span="L5 M5 S5"/>
									</layoutData>
								</StandardListItem>
								<StandardListItem title="{i18n>CustomerName}">
									<layoutData>
										<l:GridData span="L2 M2 S2"/>
									</layoutData>
								</StandardListItem>
								<HBox>
									<layoutData>
										<l:GridData span="L3 M3 S3"></l:GridData>
									</layoutData>
									<Input id="idCustomerInput" value="{/equipment/installed_at_name}" valueLiveUpdate="true" width="300px"
										liveChange="customerInputChange" visible="true"/>
									<ComboBox id="idCustomerCombo" toolTip="select customer..." 
											visible="false" selectionChange="customerDropDownChange" width="300px">
										<items>
											<c:ListItem text="{name}" tooltip="{city}" key="{id}"/>
										</items>
									</ComboBox>	
								</HBox>
								<StandardListItem title="{i18n>CurrentEquipmentState}">
									<layoutData>
										<l:GridData span="L2 M2 S2"/>
									</layoutData>
								</StandardListItem>
								<StandardListItem id="idCurrentState" title="{/equipment/checked_in}">
									<layoutData>
										<l:GridData span="L2 M2 S2"/>
									</layoutData>
								</StandardListItem>
							</l:content>
						</l:Grid>
					</IconTabFilter>
				</items>
			</IconTabBar>
			<IconTabBar id="idSubIconBar">
				<items>
					<IconTabFilter id="idServiceFlow" text="Service Flow" visible="false">
						<l:Grid defaultSpan="L6 M6 S12">
							<l:content>
								<TextArea id="idNotifText" rows="10" width="100%" 
									value="Damage:&#13;&#13;Driver:&#13;License Plate:">
									<layoutData>
										<l:GridData span="L5 M5 S10"/>
									</layoutData>
								</TextArea>
								<l:Grid defaultSpan="L7 M7 S6">
									<l:content>
										<Label text="Service Flow" labelFor="idCmbFlow">
											<layoutData>
												<l:GridData span="L2 M2 S10"/>
											</layoutData>
										</Label>
										<ComboBox id="idCmbFlow" toolTip="Select service flow..."  
											visible="true" selectionChange="flowDropDownChange" width="300px">
											<items>
												<c:ListItem text="Fixed Price (FP)" tooltip="Execute a fixed price Service Flow" key="FP"/>
												<c:ListItem text="Do and Charge (CH)" tooltip="Execute an RRB Service Flow" key="CH"/>
											</items>
											<layoutData>
												<l:GridData span="L5 M5 S8"/>
											</layoutData>
										</ComboBox>
										<Input id="idFixedPriceValue" placeholder="Price" tooltip="Enter price for order" visible="false" liveChange="inputFPPriceChange">
											<layoutData>
												<l:GridData span="L2 M2 S2"/>
											</layoutData>
										</Input>
										<Button id="idBtnCheckin" type="Emphasized" text="{/checkinButton}" press="checkInEquipment" >
											<layoutData>
												<l:GridData span="L8 M8 S8"/>
											</layoutData>
										</Button>
									</l:content>
								</l:Grid>
							</l:content>
						</l:Grid>
					</IconTabFilter>
					<IconTabFilter id="idEquipmentList" text="{i18n>EquipmentOnLocation}">
						<FlexBox id="idFlexEquipment" justifyContent="Center" visible="false">
							<items>
								<ScrollContainer id="idSelectContainer" width="80%" height="500px" vertical="true">
									<Table id="TableEquipment" items="{/equipmentList}">
										<items>
											<ColumnListItem>
												<cells>
													<Link text="{serial_number}" press="selectSerialNr"/>
													<Text text="{description}" />
												</cells>
											</ColumnListItem>
										</items>
										<columns>
											<Column>
												<header>
													<Text text="{i18n>SerialNumber}"/>
												</header>
											</Column>					
											<Column>
												<header>
												<Text text="{i18n>Description}"/>
											</header>
											</Column>
										</columns>
									</Table>
								</ScrollContainer>
							</items>
						</FlexBox>
					</IconTabFilter>
					<IconTabFilter id="idOrderList" text="Orders" visible="false">
						<f:SimpleForm title="{i18n>serviceDetailPanelText}">
							<f:content>
								<Table noDataText="er is niks" id="TableOrders" items="{/Orders}">
									<items>
										<ColumnListItem counter="0">
											<cells>
												<Text text="{ordernr}"></Text>
											</cells>
										</ColumnListItem>
									</items>       
									<columns>		                       
										<Column sortProperty="ordernr" filterProperty="ordernr">                                 
											<header>
												<Text text="Order" />
											</header>               
										</Column>
									</columns>
								</Table>
							</f:content>
						</f:SimpleForm>
					</IconTabFilter>
				</items>
			</IconTabBar>
		</content>
		<footer>
			<Bar>
				<contentLeft>
					<Label text="{i18n>SerialNumber}" class="sapUiSmallMargin"/>
					<Label text="{/equipment/serial_number_id}"/>
				</contentLeft>
				<contentMiddle>
					<Label text="{/equipment/description}"/>
				</contentMiddle>
				<contentRight>
					<Label text="{i18n>CustomerName}" class="sapUiSmallMargin"/>
					<Label text="{/equipment/installed_at_name}"/>
					<Label text="(SAP id: "/>
					<Label text="{/equipment/installed_at}"/>
					<Label text=")"/>
				</contentRight>
			</Bar>
		</footer>
	</Page>
</core:View>